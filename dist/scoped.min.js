!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";const a=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,l=/([([,]|:scope\b)/,u=/^:scope\b/,e=document.createElement("style"),f=(e.textContent=".x{color:red;}",document.head.appendChild(e),(e.sheet.cssRules[0].selectorText=".change")===e.sheet.cssRules[0].selectorText),o=(document.head.removeChild(e),{applyToClass:!1,prefix:"__scoped_"}),c=(Object.defineProperty(HTMLStyleElement.prototype,"scoped",{enumerable:!0,get(){return this.hasAttribute("scoped")},set(e){e?this.setAttribute("scoped",this.getAttribute("scoped")||""):this.removeAttribute("scoped")}}),new Map);function p(e,t){const n=[];for(;e;){var s=function(e,t){let n=e.search(l);if(-1===n)return{selector:t+" "+e,rest:""};if(","===e[n])return{selector:t+" "+e.substr(0,n),rest:e.substr(n+1)};let s=!0,r=!1,o=(n=e.search(/\S/),0);e:for(;n<e.length;++n){var c=e[n];switch(c){case"[":var i=a.exec(e.substr(n));n+=(i?i[0].length:1)-1;continue;case"(":++o;continue;case":":if(!s)continue;if(!u.test(e.substr(n)))continue;if(o)return null;e=e.substring(0,n)+t+e.substr(n+6),n+=t.length,r=!0,--n;continue;case")":o&&--o;continue}if(!o)switch(c){case",":break e;case" ":case">":case"~":case"+":if(!s)continue;s=!1}}return{selector:(r?"":t+" ")+e.substr(0,n),rest:e.substr(n+1)}}(e,t);if(null===s)return":not(*)";n.push(s.selector),e=s.rest}return n.join(", ")}function h(e,t){const n=e.parentStyleSheet;let s;for(s=0;s<n.rules.length&&n.rules[s]!==e;++s);return n.removeRule(s),n.insertRule(t,s),n.rules[s]}function m(e){let t=null;try{t=e.cssRules}catch(e){if(e instanceof DOMException)return e;throw e}return t?null:{code:DOMException.SECURITY_ERR}}const i=function(){const i=new WeakMap,a=new Map,l=new Map,u=function(){let e=0;function t(){let n=!1;e=0,a.forEach((e,t)=>{if(t.styleSheet)d(t.styleSheet,e);else if(function(e){let t=e.parentStyleSheet;for(;t;){if(t.ownerNode)return t.ownerNode;t=t.parentStyleSheet}}(t))return void(n=!0);a.delete(t)}),l.forEach((e,t)=>{m(t)?n=!0:(d(t,e),l.delete(t))}),n&&(e=window.requestAnimationFrame(t))}return function(){e=e||window.requestAnimationFrame(t)}}();function d(t,n){if(i.get(t)!==n){var e=m(t);if(e)switch(e.code){case DOMException.SECURITY_ERR:const o=new XMLHttpRequest,c=(o.responseType="blob",o.open("GET",t.href),h(t.ownerRule,"@import url('data:text/css;base64,')"));return o.onload=()=>{var e=URL.createObjectURL(o.response),t=h(c,`@import '${e}'`);a.set(t,n),u(),URL.revokeObjectURL(e)},void o.send();case DOMException.INVALID_ACCESS_ERR:return l.set(t,n),void u();default:throw e}i.set(t,n);var s=t.cssRules.length;for(let e=0;e<s;++e){var r=t.cssRules[e];r instanceof CSSImportRule?r.styleSheet?d(r.styleSheet,n):(a.set(r,n),u()):function t(n,s,e,r){if(n instanceof CSSMediaRule){var o=n.cssRules.length;for(let e=0;e<o;++e)t(n.cssRules[e],s,n,e)}else{var c,i;n instanceof CSSStyleRule&&(c=p(n.selectorText,s),f?n.selectorText=c:(i=n.style.cssText,e.deleteRule(r),e.insertRule(c+` {${i}}`,r)))}}(r,n,t,e)}return!0}}return d}();function d(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function s(e,t,n){n?e.classList.add(t):e.classList.remove(t)}let b=d,S=0;function y(e){var t,n,s=e.scoped&&document.body.contains(e)?e.parentNode:null;const r=c.get(e);if(r)return s?e.sheet&&i(e.sheet,r.prefix):(c.delete(e),n=(t=e).textContent,t.textContent="",t.textContent=n),r.parent!==s&&(r.parent&&b(r.parent,r.attrName,!1),s&&b(s,r.attrName,!0),r.parent=s),!1;s&&(t=""+o.prefix+ ++S,n=b===d?`[${t}]`:"."+t,c.set(e,{attrName:t,prefix:n,parent:e.parentNode}),i(e.sheet,n),b(s,t,!0))}const r=new MutationObserver(e=>{const r=new Set,t=e=>{let t=e?e.length:0;for(;t;){const s=e[--t];if(s instanceof HTMLElement)if(s instanceof HTMLStyleElement)r.add(s);else{var n=s.getElementsByTagName("style");let e=n.length;for(;e;)r.add(n[--e])}}};e.forEach(e=>{e.target instanceof HTMLStyleElement?r.add(e.target):(t(e.addedNodes),t(e.removedNodes))}),r.forEach(y)});function t(){var e=window.scopedCSS;if("object"==typeof e){for(var t in o)t in e&&(o[t]=e[t]);o.applyToClass&&(b=s)}r.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["scoped"]});var n=document.body.getElementsByTagName("style");for(let e=0;e<n.length;++e)y(n[e])}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t()});
