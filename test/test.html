<!DOCTYPE html>
<html>
<body>

<header>
  <main id="main">
    <style scoped type="text/css" id="scoped">
      @import './file.css';
/*      @import './does-not-exist.css';
*/
      h1 {
        color: red;
      }
      a {
        color: pink;
      }
    </style>
    <h1>I should be red</h1>
    <p>
      <a>What about me?</a>
    </p>
    <p>
      And blue
    </p>
  </main>
  <footer id="footer">
    <h1>I should not be red</h1>
    <p>
      <a>But not me</a>
    </p>
    <p>
      And not blue
    </p>
  </footer>
</header>

<button id="button">Move CSS</button>

<script>
  button.addEventListener('click', (ev) => {
    let target = main;
    if (scoped.parentNode === main) {
      target = footer;
    }
    target.appendChild(scoped);
  });
</script>

<script src="../scoped.js"></script>
</body>
</html>